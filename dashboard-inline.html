<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartIm√≥veis - Dashboard Moderno</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
          'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
          sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      
      .loading {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background: #f9fafb;
      }
      
      .spinner {
        border: 4px solid #f3f4f6;
        border-top: 4px solid #3b82f6;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
  </head>
  <body>
    <div id="root">
      <div class="loading">
        <div class="spinner"></div>
      </div>
    </div>
    
    <script>
      // Aguardar carregamento das bibliotecas
      window.addEventListener('load', () => {
        // Configura√ß√£o do Supabase
        const SUPABASE_CONFIG = {
          url: 'https://zywcqdjlreqaawasoqqu.supabase.co',
          anonKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp5d2NxZGpscmVxYWF3YXNvcXF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1NTEwMjIsImV4cCI6MjA3MDEyNzAyMn0.DShW5_4bqwQ0YaakWHtiqt1RnNoezUYKeVChjRxD4ng'
        };
        
        // Inicializar Supabase
        const supabaseClient = window.supabase.createClient(SUPABASE_CONFIG.url, SUPABASE_CONFIG.anonKey);
        
        // Componente Dashboard Simples
        const { useState, useEffect } = React;
        
        const Dashboard = () => {
          const [stats, setStats] = useState({
            totalImoveis: 0,
            totalLeads: 0,
            vendasMes: 0,
            visualizacoes: 0
          });
          const [loading, setLoading] = useState(true);
          const [error, setError] = useState(null);
          
          useEffect(() => {
            loadData();
          }, []);
          
          const loadData = async () => {
            try {
              // Carregar estat√≠sticas b√°sicas
              const { data: imoveis } = await supabaseClient.from('imoveis').select('*');
              const { data: leads } = await supabaseClient.from('leads').select('*');
              
              setStats({
                totalImoveis: imoveis?.length || 0,
                totalLeads: leads?.length || 0,
                vendasMes: leads?.filter(l => l.status === 'convertido').length || 0,
                visualizacoes: imoveis?.reduce((sum, i) => sum + (i.visualizacoes || 0), 0) || 0
              });
              
              setLoading(false);
            } catch (err) {
              setError(err.message);
              setLoading(false);
            }
          };
          
          if (loading) {
            return React.createElement('div', { className: 'loading' },
              React.createElement('div', { className: 'spinner' })
            );
          }
          
          if (error) {
            return React.createElement('div', { 
              className: 'p-4 bg-red-100 border border-red-400 text-red-700 rounded' 
            }, `Erro: ${error}`);
          }
          
          return React.createElement('div', { className: 'min-h-screen bg-gray-50' },
            // Header
            React.createElement('header', { className: 'bg-white shadow' },
              React.createElement('div', { className: 'max-w-7xl mx-auto px-4 sm:px-6 lg:px-8' },
                React.createElement('div', { className: 'flex justify-between items-center py-6' },
                  React.createElement('h1', { className: 'text-3xl font-bold text-gray-900' }, 'SmartIm√≥veis Dashboard'),
                  React.createElement('div', { className: 'flex items-center space-x-4' },
                    React.createElement('span', { className: 'text-sm text-gray-500' }, 'Conectado ao Supabase ‚úÖ')
                  )
                )
              )
            ),
            
            // Main Content
            React.createElement('main', { className: 'max-w-7xl mx-auto py-6 sm:px-6 lg:px-8' },
              // Stats Cards
              React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8' },
                React.createElement('div', { className: 'bg-white overflow-hidden shadow rounded-lg' },
                  React.createElement('div', { className: 'p-5' },
                    React.createElement('div', { className: 'flex items-center' },
                      React.createElement('div', { className: 'flex-shrink-0' },
                        React.createElement('div', { className: 'w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center' },
                          React.createElement('span', { className: 'text-white font-bold' }, 'üè†')
                        )
                      ),
                      React.createElement('div', { className: 'ml-5 w-0 flex-1' },
                        React.createElement('dl', null,
                          React.createElement('dt', { className: 'text-sm font-medium text-gray-500 truncate' }, 'Total de Im√≥veis'),
                          React.createElement('dd', { className: 'text-lg font-medium text-gray-900' }, stats.totalImoveis)
                        )
                      )
                    )
                  )
                ),
                
                React.createElement('div', { className: 'bg-white overflow-hidden shadow rounded-lg' },
                  React.createElement('div', { className: 'p-5' },
                    React.createElement('div', { className: 'flex items-center' },
                      React.createElement('div', { className: 'flex-shrink-0' },
                        React.createElement('div', { className: 'w-8 h-8 bg-green-500 rounded-md flex items-center justify-center' },
                          React.createElement('span', { className: 'text-white font-bold' }, 'üë•')
                        )
                      ),
                      React.createElement('div', { className: 'ml-5 w-0 flex-1' },
                        React.createElement('dl', null,
                          React.createElement('dt', { className: 'text-sm font-medium text-gray-500 truncate' }, 'Total de Leads'),
                          React.createElement('dd', { className: 'text-lg font-medium text-gray-900' }, stats.totalLeads)
                        )
                      )
                    )
                  )
                ),
                
                React.createElement('div', { className: 'bg-white overflow-hidden shadow rounded-lg' },
                  React.createElement('div', { className: 'p-5' },
                    React.createElement('div', { className: 'flex items-center' },
                      React.createElement('div', { className: 'flex-shrink-0' },
                        React.createElement('div', { className: 'w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center' },
                          React.createElement('span', { className: 'text-white font-bold' }, 'üí∞')
                        )
                      ),
                      React.createElement('div', { className: 'ml-5 w-0 flex-1' },
                        React.createElement('dl', null,
                          React.createElement('dt', { className: 'text-sm font-medium text-gray-500 truncate' }, 'Vendas do M√™s'),
                          React.createElement('dd', { className: 'text-lg font-medium text-gray-900' }, stats.vendasMes)
                        )
                      )
                    )
                  )
                ),
                
                React.createElement('div', { className: 'bg-white overflow-hidden shadow rounded-lg' },
                  React.createElement('div', { className: 'p-5' },
                    React.createElement('div', { className: 'flex items-center' },
                      React.createElement('div', { className: 'flex-shrink-0' },
                        React.createElement('div', { className: 'w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center' },
                          React.createElement('span', { className: 'text-white font-bold' }, 'üëÅÔ∏è')
                        )
                      ),
                      React.createElement('div', { className: 'ml-5 w-0 flex-1' },
                        React.createElement('dl', null,
                          React.createElement('dt', { className: 'text-sm font-medium text-gray-500 truncate' }, 'Visualiza√ß√µes'),
                          React.createElement('dd', { className: 'text-lg font-medium text-gray-900' }, stats.visualizacoes)
                        )
                      )
                    )
                  )
                )
              ),
              
              // Success Message
              React.createElement('div', { className: 'bg-green-50 border border-green-200 rounded-md p-4' },
                React.createElement('div', { className: 'flex' },
                  React.createElement('div', { className: 'flex-shrink-0' },
                    React.createElement('span', { className: 'text-green-400 text-xl' }, '‚úÖ')
                  ),
                  React.createElement('div', { className: 'ml-3' },
                    React.createElement('h3', { className: 'text-sm font-medium text-green-800' }, 'Dashboard Funcionando!'),
                    React.createElement('div', { className: 'mt-2 text-sm text-green-700' },
                      React.createElement('p', null, 'O dashboard est√° conectado com sucesso ao Supabase e carregando dados reais do banco de dados.'),
                      React.createElement('ul', { className: 'list-disc list-inside mt-2' },
                        React.createElement('li', null, 'Projeto Supabase: SmartIm√≥veis Dashboard'),
                        React.createElement('li', null, 'Banco de dados: PostgreSQL'),
                        React.createElement('li', null, 'Tabelas: imoveis, leads'),
                        React.createElement('li', null, 'Status: Ativo e funcionando')
                      )
                    )
                  )
                )
              )
            )
          );
        };
        
        // Renderizar o componente
        const { createRoot } = ReactDOM;
        const root = createRoot(document.getElementById('root'));
        root.render(React.createElement(Dashboard));
      });
    </script>
  </body>
</html>